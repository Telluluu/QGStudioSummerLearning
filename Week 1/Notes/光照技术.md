# 光照技术与阴影

### 全局光照：

在计算物体光照时，需要考虑直接光照，也要考虑间接光照，如灯光照射到一个红色沙发表面，会反射光线，使附近的白色墙面也呈现淡淡的红色。全局光照能渲染出逼真的场景，但它的计算过程非常复杂，需要消耗大量的计算资源，很难用在实时图形程序。为了克服全局光照的计算瓶颈，unity提供了Baked GI 烘焙全局光照技术和Precomputed Realtime GI 预计算全局光照技术。

<font size=5>**Precomputed Realtime GI**</font>的优势在于允许实时改变光源的数量、位置、朝向以及物体的材质，但对设备的性能要求较高，适合PC、主机等。如果光源变化缓慢且对场景具有很高的视觉影响，可以使用实时GI，反之，对于快速变化的光源或对于特殊效果，由于性能成本和延迟，不适合使用实时GI。

<font size=5>**Baked GI**</font>虽然不允许实时改变光源属性和材质，但软阴影效果更好，对设备性能要求更低，适合移动端

##### <font size=5>**局限性**</font>：在游戏运行时，非静态物体无法直接受到烘焙光源和静态反射光线的影响，比如游戏运行时敌人的外表无法被照亮，显得昏暗。

##### <font size=5>**光照探头**</font>（HDRP）：利用光照探头技术可以在游戏运行阶段实时获得非静态物体的近似全局光照效果

编辑阶段：在场景中放置光照探头，并在探头的位置对光照进行采样，保存采样数据

运行阶段：选择非静态物体附近的几个光照探头，使用这些探头的采样数据，插值获得静态物体应当受到的光照





#### 实时阴影：

Unity中的实时阴影主要有两种类型：

1.<font size=5>**实时阴影映射（Real-time ShadowMaps）**</font>（HDRP）：通过将光源视角渲染到阴影贴图中，再将贴图应用于场景中的物体，实现实时的阴影效果。

2.<font size=5>实时阴影投射（Real-time Shadow Projection）</font>：通过计算光线与物体之间的相交关系，直接在渲染过程中计算阴影效果

#### 二者对比：

实时阴影投影较实时阴影映射更精确、更真实，但因为需要进行更复杂的计算和渲染，会对性能产生较大的影响，通常只适用于静态对象，而实时阴影贴图可以与动态对象一起使用，动态更新阴影。

实时阴影映射更适合场景中存在复杂几何形状和光源布局的情况，实时阴影投射更适合需要更真实、更精准阴影效果的情况。